<html>
  <head>
    <title>Hammerspoon docs: hs.battery module</title>
    <style type="text/css">
      a { text-decoration: none; }
      a:hover { text-decoration: underline; }
      header { padding-bottom: 50px; }
      section { border-top: 1px solid #777; padding-bottom: 20px; }
    </style>
    <link rel="stylesheet" href="docs.css" type="text/css" media="screen" />
  </head>
  <body>
    <header>
      <h1>hs.battery</h1>
      <p>Functions for getting battery info. All functions here may return nil, if the information requested is not available.</p>

<p>This module is based primarily on code from the previous incarnation of Mjolnir by <a href="https://github.com/sdegutis/">Steven Degutis</a>.</p>

    </header>
    
    <section id="amperage">
      <a name="//apple_ref/cpp/Function/amperage" class="dashAnchor"></a>
      <h3><a href="#amperage">amperage</a></h3>
      <code>hs.battery.amperage() -> number</code>
      <p>Returns the amount of current flowing through the battery, in mAh</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the amount of current flowing through the battery. The value may be:

<ul>
<li>Less than zero if the battery is being discharged (i.e. the computer is running on battery power)</li>
<li>Zero if the battery is being neither charged nor discharged</li>
<li>Greater than zero if the battery is being charged</li>
</ul></li>
</ul>

    </section>
    
    <section id="capacity">
      <a name="//apple_ref/cpp/Function/capacity" class="dashAnchor"></a>
      <h3><a href="#capacity">capacity</a></h3>
      <code>hs.battery.capacity() -> number</code>
      <p>Returns the current capacity of the battery in mAh</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the current capacity of the battery in mAh</li>
</ul>

<p>Notes:</p>

<ul>
<li>This is the measure of how charged the battery is, vs the value of <code>hs.battery.maxCapacity()</code></li>
</ul>

    </section>
    
    <section id="cycles">
      <a name="//apple_ref/cpp/Function/cycles" class="dashAnchor"></a>
      <h3><a href="#cycles">cycles</a></h3>
      <code>hs.battery.cycles() -> number</code>
      <p>Returns the number of discharge cycles of the battery</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>The number of cycles</li>
</ul>

<p>Notes:</p>

<ul>
<li>One cycle is a full discharge of the battery, followed by a full charge. This may also be an aggregate of many smaller discharge-then-charge cycles (e.g. 10 iterations of discharging the battery from 100% to 90% and then charging back to 100% each time, is considered to be one cycle)</li>
</ul>

    </section>
    
    <section id="designCapacity">
      <a name="//apple_ref/cpp/Function/designCapacity" class="dashAnchor"></a>
      <h3><a href="#designCapacity">designCapacity</a></h3>
      <code>hs.battery.designCapacity() -> number</code>
      <p>Returns the design capacity of the battery in mAh.</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the rated maximum capacity of the battery</li>
</ul>

    </section>
    
    <section id="getAll">
      <a name="//apple_ref/cpp/Function/getAll" class="dashAnchor"></a>
      <h3><a href="#getAll">getAll</a></h3>
      <code>hs.battery.getAll() -> table</code>
      <p>Get all available battery information</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A table containing all the information provided by the separate functions in hs.battery</li>
</ul>

<p>Notes:</p>

<ul>
<li>If you require multiple pieces of information about a battery, this function may be more efficient than calling several other functions separately</li>
</ul>

    </section>
    
    <section id="health">
      <a name="//apple_ref/cpp/Function/health" class="dashAnchor"></a>
      <h3><a href="#health">health</a></h3>
      <code>hs.battery.health() -> string</code>
      <p>Returns the health status of the battery.</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A string containing one of {Good, Fair, Poor}, as determined by the Apple Smart Battery controller</li>
</ul>

    </section>
    
    <section id="healthCondition">
      <a name="//apple_ref/cpp/Function/healthCondition" class="dashAnchor"></a>
      <h3><a href="#healthCondition">healthCondition</a></h3>
      <code>hs.battery.healthCondition() -> string or nil</code>
      <p>Returns the health condition status of the battery.</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>Nil if there are no health conditions to report, or a string containing either:

<ul>
<li>&quot;Check Battery&quot;</li>
<li>&quot;Permanent Battery Failure&quot;</li>
</ul></li>
</ul>

    </section>
    
    <section id="isCharged">
      <a name="//apple_ref/cpp/Function/isCharged" class="dashAnchor"></a>
      <h3><a href="#isCharged">isCharged</a></h3>
      <code>hs.battery.isCharged() -> boolean</code>
      <p>Returns the charged state of the battery</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>True if the battery is charged, false if not</li>
</ul>

    </section>
    
    <section id="isCharging">
      <a name="//apple_ref/cpp/Function/isCharging" class="dashAnchor"></a>
      <h3><a href="#isCharging">isCharging</a></h3>
      <code>hs.battery.isCharging() -> boolean</code>
      <p>Returns the charging state of the battery</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>True if the battery is being charged, false if not</li>
</ul>

    </section>
    
    <section id="isFinishingCharge">
      <a name="//apple_ref/cpp/Function/isFinishingCharge" class="dashAnchor"></a>
      <h3><a href="#isFinishingCharge">isFinishingCharge</a></h3>
      <code>hs.battery.isFinishingCharge() -> boolean or string</code>
      <p>Returns true if battery is finishing its charge</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>True if the battery is in its final charging state (i.e. trickle charging), false if not, or &quot;n/a&quot; if the battery is not charging at all</li>
</ul>

    </section>
    
    <section id="maxCapacity">
      <a name="//apple_ref/cpp/Function/maxCapacity" class="dashAnchor"></a>
      <h3><a href="#maxCapacity">maxCapacity</a></h3>
      <code>hs.battery.maxCapacity() -> number</code>
      <p>Returns the maximum capacity of the battery in mAh</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the observed maximum capacity of the battery in mAh</li>
</ul>

<p>Notes:</p>

<ul>
<li>This may exceed the value of <code>hs.battery.designCapacity()</code> due to small variations in the production chemistry vs the design</li>
</ul>

    </section>
    
    <section id="name">
      <a name="//apple_ref/cpp/Function/name" class="dashAnchor"></a>
      <h3><a href="#name">name</a></h3>
      <code>hs.battery.name() -> string</code>
      <p>Returns the name of the battery</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A string containing the name of the battery</li>
</ul>

    </section>
    
    <section id="percentage">
      <a name="//apple_ref/cpp/Function/percentage" class="dashAnchor"></a>
      <h3><a href="#percentage">percentage</a></h3>
      <code>hs.battery.percentage() -> number</code>
      <p>Returns the current percentage of battery charge</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the percentage of battery charge</li>
</ul>

    </section>
    
    <section id="powerSource">
      <a name="//apple_ref/cpp/Function/powerSource" class="dashAnchor"></a>
      <h3><a href="#powerSource">powerSource</a></h3>
      <code>hs.battery.powerSource() -> string</code>
      <p>Returns current source of power</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A string containing one of {AC Power, Battery Power, Off Line}.</li>
</ul>

    </section>
    
    <section id="timeRemaining">
      <a name="//apple_ref/cpp/Function/timeRemaining" class="dashAnchor"></a>
      <h3><a href="#timeRemaining">timeRemaining</a></h3>
      <code>hs.battery.timeRemaining() -> number</code>
      <p>Returns the battery life remaining, in minutes</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the minutes of battery life remaining. The value may be:

<ul>
<li>Greater than zero to indicate the number of minutes remaining</li>
<li>-1 if the remaining battery life is still being calculated</li>
<li>-2 if there is unlimited time remaining (i.e. the system is on AC power)</li>
</ul></li>
</ul>

    </section>
    
    <section id="timeToFullCharge">
      <a name="//apple_ref/cpp/Function/timeToFullCharge" class="dashAnchor"></a>
      <h3><a href="#timeToFullCharge">timeToFullCharge</a></h3>
      <code>hs.battery.timeToFullCharge() -> number</code>
      <p>Returns the time remaining for the battery to be fully charged, in minutes</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the time (in minutes) remaining for the battery to be fully charged, or -1 if the remaining time is still being calculated</li>
</ul>

    </section>
    
    <section id="voltage">
      <a name="//apple_ref/cpp/Function/voltage" class="dashAnchor"></a>
      <h3><a href="#voltage">voltage</a></h3>
      <code>hs.battery.voltage() -> number</code>
      <p>Returns the current voltage of the battery in mV</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the current voltage of the battery</li>
</ul>

    </section>
    
    <section id="watts">
      <a name="//apple_ref/cpp/Function/watts" class="dashAnchor"></a>
      <h3><a href="#watts">watts</a></h3>
      <code>hs.battery.watts() -> number</code>
      <p>Returns the power entering or leaving the battery, in W</p>

<p>Parameters:</p>

<ul>
<li>None</li>
</ul>

<p>Returns:</p>

<ul>
<li>A number containing the rate of energy conversion in the battery. The value may be:

<ul>
<li>Less than zero if the battery is being discharged (i.e. the computer is running on battery power)</li>
<li>Zero if the battery is being neither charged nor discharged</li>
<li>Greater than zero if the battery is being charged</li>
</ul></li>
</ul>

    </section>
    
  </body>
</html>
