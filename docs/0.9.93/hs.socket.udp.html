<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hammerspoon docs: hs.socket.udp</title>
    <style type="text/css">
      a { text-decoration: none; }
      a:hover { text-decoration: underline; }
      th { background-color: #DDDDDD; vertical-align: top; padding: 3px; }
      td { width: 100%; background-color: #EEEEEE; vertical-align: top; padding: 3px; }
      table { width: 100% ; border: 1px solid #0; text-align: left; }
      section > table table td { width: 0; }
    </style>
    <link rel="stylesheet" href="docs.css" type="text/css" media="screen" />
  </head>
  <body>
    <header>
      <h1><a href="./index.html">docs</a> &raquo; hs.socket.udp</h1>
      <p>Talk to custom protocols using asynchronous UDP sockets</p>
<p>For TCP sockets see <a href="./hs.socket.html"><code>hs.socket</code></a></p>
<p>You can do a lot of neat trivial and non-trivial things with these. A simple ping ponger:</p>
<p>&lt;pre style=&quot;font-size:10px&quot;&gt;
function ping(data, addr)
  print(data)
  addr = hs.socket.parseAddress(addr)
  hs.timer.doAfter(1, function()
    client:send(&quot;ping&quot;, addr.host, addr.port)
  end)
end

function pong(data, addr)
  print(data)
  addr = hs.socket.parseAddress(addr)
  hs.timer.doAfter(1, function()
    server:send(&quot;pong&quot;, addr.host, addr.port)
  end)
end

server = hs.socket.udp.server(9001, pong):receive()
client = hs.socket.udp.new(ping):send(&quot;ping&quot;, &quot;localhost&quot;, 9001):receive()
&lt;/pre&gt;</p>
<p>Resulting in the following endless exchange:</p>
<p>&lt;pre style=&quot;font-size:10px&quot;&gt;
20:26:56    LuaSkin: (secondary thread): Data written to UDP socket
            LuaSkin: (secondary thread): Data read from UDP socket
ping
20:26:57    LuaSkin: (secondary thread): Data written to UDP socket
            LuaSkin: (secondary thread): Data read from UDP socket
pong
20:26:58    LuaSkin: (secondary thread): Data written to UDP socket
            LuaSkin: (secondary thread): Data read from UDP socket
ping
20:26:59    LuaSkin: (secondary thread): Data written to UDP socket
            LuaSkin: (secondary thread): Data read from UDP socket
pong
...
&lt;/pre&gt;</p>
<p>You can do some silly things with a callback factory and enabling broadcasting:</p>
<p>&lt;pre style=&quot;font-size:10px&quot;&gt;
local function callbackMaker(name)
  local fun = function(data, addr)
    addr = hs.socket.parseAddress(addr)
    print(name..&quot; received data:\n&quot;..data..&quot;\nfrom host: &quot;..addr.host..&quot; port: &quot;..addr.port)
  end
  return fun
end

local listeners = {}
local port = 9001

for i=1,3 do
  table.insert(listeners, hs.socket.udp.new(callbackMaker(&quot;listener &quot;..i)):reusePort():listen(port):receive())
end

broadcaster = hs.socket.udp.new():broadcast()
broadcaster:send(&quot;hello!&quot;, &quot;255.255.255.255&quot;, port)
&lt;/pre&gt;</p>
<p>Since neither IPv4 nor IPv6 have been disabled, the broadcast is received on both protocols ('dual-stack' IPv6 addresses shown):</p>
<p>&lt;pre style=&quot;font-size:10px&quot;&gt;
listener 2 received data:
hello!
from host: ::ffff:192.168.0.3 port: 53057
listener 1 received data:
hello!
from host: ::ffff:192.168.0.3 port: 53057
listener 3 received data:
hello!
from host: ::ffff:192.168.0.3 port: 53057
listener 1 received data:
hello!
from host: 192.168.0.3 port: 53057
listener 3 received data:
hello!
from host: 192.168.0.3 port: 53057
listener 2 received data:
hello!
from host: 192.168.0.3 port: 53057
&lt;/pre&gt;</p>

      </header>
      <h3>API Overview</h3>
      <ul>
        <li>Variables - Configurable values</li>
          <ul>
            <li><a href="#timeout">timeout</a></li>
          </ul>
        <li>Functions - API calls offered directly by the extension</li>
          <ul>
            <li><a href="#parseAddress">parseAddress</a></li>
          </ul>
        <li>Constructors - API calls which return an object, typically one that offers API methods</li>
          <ul>
            <li><a href="#new">new</a></li>
            <li><a href="#server">server</a></li>
          </ul>
        <li>Methods - API calls which can only be made on an object returned by a constructor</li>
          <ul>
            <li><a href="#broadcast">broadcast</a></li>
            <li><a href="#close">close</a></li>
            <li><a href="#closed">closed</a></li>
            <li><a href="#connect">connect</a></li>
            <li><a href="#connected">connected</a></li>
            <li><a href="#enableIPv">enableIPv</a></li>
            <li><a href="#info">info</a></li>
            <li><a href="#listen">listen</a></li>
            <li><a href="#pause">pause</a></li>
            <li><a href="#preferIPv">preferIPv</a></li>
            <li><a href="#read">read</a></li>
            <li><a href="#readOne">readOne</a></li>
            <li><a href="#receive">receive</a></li>
            <li><a href="#receiveOne">receiveOne</a></li>
            <li><a href="#reusePort">reusePort</a></li>
            <li><a href="#send">send</a></li>
            <li><a href="#setBufferSize">setBufferSize</a></li>
            <li><a href="#setCallback">setCallback</a></li>
            <li><a href="#setTimeout">setTimeout</a></li>
            <li><a href="#write">write</a></li>
          </ul>
      </ul>
      <h3>API Documentation</h3>
        <h4 class="documentation-section">Variables</h4>
          <section id="timeout">
            <a name="//apple_ref/cpp/Variable/timeout" class="dashAnchor"></a>
            <h5><a href="#timeout">timeout</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp.timeout</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Variable</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Timeout for the socket operations, in seconds. New [`hs.socket.udp`](#new) objects will be created with this timeout value, but can individually change it with the [`setTimeout`](#setTimeout) method</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L170">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
        <h4 class="documentation-section">Functions</h4>
          <section id="parseAddress">
            <a name="//apple_ref/cpp/Function/parseAddress" class="dashAnchor"></a>
            <h5><a href="#parseAddress">parseAddress</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp.parseAddress(sockaddr) -&gt; table or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Function</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Alias for [`hs.socket.parseAddress`](./hs.socket.html#parseAddress)</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td></td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td></td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L178">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
        <h4 class="documentation-section">Constructors</h4>
          <section id="new">
            <a name="//apple_ref/cpp/Constructor/new" class="dashAnchor"></a>
            <h5><a href="#new">new</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp.new([fn]) -&gt; hs.socket.udp object</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Constructor</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Creates an unconnected asynchronous UDP socket object</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>fn - An optional <a href="#setCallback">callback function</a> for reading data from the socket, settable here for convenience</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>An <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L111">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="server">
            <a name="//apple_ref/cpp/Constructor/server" class="dashAnchor"></a>
            <h5><a href="#server">server</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp.server(port[, fn]) -&gt; hs.socket.udp object</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Constructor</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Creates and binds an [`hs.socket.udp`](#new) instance to a port for listening</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>port - A port number [0-65535]. Ports [1-1023] are privileged. Port 0 allows the OS to select any available port</li>
<li>fn - An optional <a href="#setCallback">callback function</a> for reading data from the socket, settable here for convenience</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>An <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L202">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
        <h4 class="documentation-section">Methods</h4>
          <section id="broadcast">
            <a name="//apple_ref/cpp/Method/broadcast" class="dashAnchor"></a>
            <h5><a href="#broadcast">broadcast</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:broadcast([flag]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Enables broadcasting on the underlying socket</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>flag - An optional boolean: <code>true</code> to enable broadcasting, <code>false</code> to disable it. Defaults to <code>true</code></li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occurred</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>By default, the underlying socket in the OS will not allow you to send broadcast messages</li>
<li>In order to send broadcast messages, you need to enable this functionality in the socket</li>
<li>A broadcast is a UDP message to addresses like &quot;192.168.255.255&quot; or &quot;255.255.255.255&quot; that is delivered to every host on the network.</li>
<li>The reason this is generally disabled by default (by the OS) is to prevent accidental broadcast messages from flooding the network.</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L413">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="close">
            <a name="//apple_ref/cpp/Method/close" class="dashAnchor"></a>
            <h5><a href="#close">close</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:close() -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Immediately closes the underlying socket, freeing the [`hs.socket.udp`](#new) instance for reuse. Any pending send operations are discarded</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>None</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L222">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="closed">
            <a name="//apple_ref/cpp/Method/closed" class="dashAnchor"></a>
            <h5><a href="#closed">closed</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:closed() -&gt; bool</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Returns the closed status of the [`hs.socket.udp`](#new) instance</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>None</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li><code>true</code> if closed, otherwise <code>false</code></li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>UDP sockets are typically meant to be connectionless</li>
<li>Sending a packet anywhere, regardless of whether or not the destination receives it, opens the socket until it is explicitly closed</li>
<li>An active listening socket will not be closed, but will not be 'connected' unless the <a href="#connect">connect</a> method has been called</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L663">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="connect">
            <a name="//apple_ref/cpp/Method/connect" class="dashAnchor"></a>
            <h5><a href="#connect">connect</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:connect(host, port[, fn]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Connects an unconnected [`hs.socket.udp`](#new) instance</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>host - A string containing the hostname or IP address</li>
<li>port - A port number [1-65535]</li>
<li>fn - An optional single-use callback function to execute after establishing the connection. Receives no parameters</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occured</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>By design, UDP is a connectionless protocol, and connecting is not needed</li>
<li>Choosing to connect to a specific host/port has the following effect:</li>
<li>You will only be able to send data to the connected host/port</li>
<li>You will only be able to receive data from the connected host/port</li>
<li>You will receive ICMP messages that come from the connected host/port, such as &quot;connection refused&quot;</li>
<li>The actual process of connecting a UDP socket does not result in any communication on the socket. It simply changes the internal state of the socket</li>
<li>You cannot bind a socket after it has been connected</li>
<li>You can only connect a socket once</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L145">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="connected">
            <a name="//apple_ref/cpp/Method/connected" class="dashAnchor"></a>
            <h5><a href="#connected">connected</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:connected() -&gt; bool</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Returns the connection status of the [`hs.socket.udp`](#new) instance</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>None</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li><code>true</code> if connected, otherwise <code>false</code></li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>UDP sockets are typically meant to be connectionless</li>
<li>This method will only return <code>true</code> if the <a href="#connect"><code>connect</code></a> method has been explicitly called</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L640">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="enableIPv">
            <a name="//apple_ref/cpp/Method/enableIPv" class="dashAnchor"></a>
            <h5><a href="#enableIPv">enableIPv</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:enableIPv(version[, flag]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Enables or disables IPv4 or IPv6 on the underlying socket. By default, both are enabled</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>version - A number containing the IP version (4 or 6) to enable or disable</li>
<li>flag - A boolean: <code>true</code> to enable the chosen IP version, <code>false</code> to disable it. Defaults to <code>true</code></li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occurred</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>Must be called before binding the socket. If you want to create an IPv6-only server, do something like:</li>
<li><code>hs.socket.udp.new(callback):enableIPv(4, false):listen(port):receive()</code></li>
<li>The convenience constructor <a href="#server"><code>hs.socket.server</code></a> will automatically bind the socket and requires closing and relistening to use this method</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L481">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="info">
            <a name="//apple_ref/cpp/Method/info" class="dashAnchor"></a>
            <h5><a href="#info">info</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:info() -&gt; table</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Returns information on the [`hs.socket.udp`](#new) instance</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>None</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>A table containing the following keys:</li>
<li>connectedAddress - <code>string</code> (<code>sockaddr</code> struct)</li>
<li>connectedHost - <code>string</code></li>
<li>connectedPort - <code>number</code></li>
<li>isClosed - <code>boolean</code></li>
<li>isConnected - <code>boolean</code></li>
<li>isIPv4 - <code>boolean</code></li>
<li>isIPv4Enabled - <code>boolean</code></li>
<li>isIPv4Preferred - <code>boolean</code></li>
<li>isIPv6 - <code>boolean</code></li>
<li>isIPv6Enabled - <code>boolean</code></li>
<li>isIPv6Preferred - <code>boolean</code></li>
<li>isIPVersionNeutral - <code>boolean</code></li>
<li>localAddress - <code>string</code> (<code>sockaddr</code> struct)</li>
<li>localAddress_IPv4 - <code>string</code> (<code>sockaddr</code> struct)</li>
<li>localAddress_IPv6 - <code>string</code> (<code>sockaddr</code> struct)</li>
<li>localHost - <code>string</code></li>
<li>localHost_IPv4 - <code>string</code></li>
<li>localHost_IPv6 - <code>string</code></li>
<li>localPort - <code>number</code></li>
<li>localPort_IPv4 - <code>number</code></li>
<li>localPort_IPv6 - <code>number</code></li>
<li>maxReceiveIPv4BufferSize - <code>number</code></li>
<li>maxReceiveIPv6BufferSize - <code>number</code></li>
<li>timeout - <code>number</code></li>
<li>userData - <code>string</code></li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L687">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="listen">
            <a name="//apple_ref/cpp/Method/listen" class="dashAnchor"></a>
            <h5><a href="#listen">listen</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:listen(port) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Binds an unconnected [`hs.socket.udp`](#new) instance to a port for listening</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>port - A port number [0-65535]. Ports [1-1023] are privileged. Port 0 allows the OS to select any available port</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occured</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L192">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="pause">
            <a name="//apple_ref/cpp/Method/pause" class="dashAnchor"></a>
            <h5><a href="#pause">pause</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:pause() -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Suspends reading of packets from the socket. Call one of the receive methods to resume</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>None</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L243">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="preferIPv">
            <a name="//apple_ref/cpp/Method/preferIPv" class="dashAnchor"></a>
            <h5><a href="#preferIPv">preferIPv</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:preferIPv([version]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Sets the preferred IP version: IPv4, IPv6, or neutral (first to resolve)</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>version - An optional number containing the IP version to prefer. Anything but 4 or 6 else sets the default neutral behavior</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>If a DNS lookup returns only IPv4 results, the socket will automatically use IPv4</li>
<li>If a DNS lookup returns only IPv6 results, the socket will automatically use IPv6</li>
<li>If a DNS lookup returns both IPv4 and IPv6 results, then the protocol used depends on the configured preference</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L518">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="read">
            <a name="//apple_ref/cpp/Method/read" class="dashAnchor"></a>
            <h5><a href="#read">read</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:read(delimiter[, tag]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Alias for [`hs.socket.udp:receive`](#receive)</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td></td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td></td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L231">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
          <section id="readOne">
            <a name="//apple_ref/cpp/Method/readOne" class="dashAnchor"></a>
            <h5><a href="#readOne">readOne</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:readOne(delimiter[, tag]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Alias for [`hs.socket.udp:receiveOne`](#receiveOne)</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td></td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td></td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L237">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
          <section id="receive">
            <a name="//apple_ref/cpp/Method/receive" class="dashAnchor"></a>
            <h5><a href="#receive">receive</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:receive([fn]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Reads packets from the socket as they arrive. Results are passed to the [callback function](#setCallback), which must be set to use this method</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>fn - Optionally supply the <a href="#setCallback">read callback</a> here</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occured</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>There are two modes of operation for receiving packets: one-at-a-time &amp; continuous</li>
<li>In one-at-a-time mode, you call receiveOne every time you are ready process an incoming UDP packet</li>
<li>Receiving packets one-at-a-time may be better suited for implementing certain state machine code where your state machine may not always be ready to process incoming packets</li>
<li>In continuous mode, the callback is invoked immediately every time incoming udp packets are received</li>
<li>Receiving packets continuously is better suited to real-time streaming applications</li>
<li>You may switch back and forth between one-at-a-time mode and continuous mode</li>
<li>If the socket is currently in one-at-a-time mode, calling this method will switch it to continuous mode</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L292">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="receiveOne">
            <a name="//apple_ref/cpp/Method/receiveOne" class="dashAnchor"></a>
            <h5><a href="#receiveOne">receiveOne</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:receiveOne([fn]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Reads a single packet from the socket. Results are passed to the [callback function](#setCallback), which must be set to use this method</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>fn - Optionally supply the <a href="#setCallback">read callback</a> here</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occured</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>There are two modes of operation for receiving packets: one-at-a-time &amp; continuous</li>
<li>In one-at-a-time mode, you call receiveOne every time you are ready process an incoming UDP packet</li>
<li>Receiving packets one-at-a-time may be better suited for implementing certain state machine code where your state machine may not always be ready to process incoming packets</li>
<li>In continuous mode, the callback is invoked immediately every time incoming udp packets are received</li>
<li>Receiving packets continuously is better suited to real-time streaming applications</li>
<li>You may switch back and forth between one-at-a-time mode and continuous mode</li>
<li>If the socket is currently in continuous mode, calling this method will switch it to one-at-a-time mode</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L317">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="reusePort">
            <a name="//apple_ref/cpp/Method/reusePort" class="dashAnchor"></a>
            <h5><a href="#reusePort">reusePort</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:reusePort([flag]) -&gt; self or nil</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Enables port reuse on the underlying socket</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>flag - An optional boolean: <code>true</code> to enable port reuse, <code>false</code> to disable it. Defaults to <code>true</code></li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object or <code>nil</code> if an error occurred</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>By default, only one socket can be bound to a given IP address+port at a time</li>
<li>To enable multiple processes to simultaneously bind to the same address+port, you need to enable this functionality in the socket</li>
<li>All processes that wish to use the address+port simultaneously must all enable reuse port on the socket bound to that port</li>
<li>Must be called before binding the socket</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L447">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="send">
            <a name="//apple_ref/cpp/Method/send" class="dashAnchor"></a>
            <h5><a href="#send">send</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:send(message, host, port[, tag][, fn]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Sends a packet to the destination address</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>message - A string containing data to be sent on the socket</li>
<li>host - A string containing the hostname or IP address</li>
<li>port - A port number [1-65535]</li>
<li>tag - An optional integer to assist with labeling writes</li>
<li>fn - An optional single-use callback function to execute after sending the packet. Receives the tag parameter</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>For non-connected sockets, the remote destination is specified for each packet</li>
<li>If the socket has been explicitly connected with <a href="#connect"><code>connect</code></a>, only the message parameter and an optional tag and/or write callback can be supplied</li>
<li>Recall that connecting is optional for a UDP socket</li>
<li>For connected sockets, data can only be sent to the connected address</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L342">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="setBufferSize">
            <a name="//apple_ref/cpp/Method/setBufferSize" class="dashAnchor"></a>
            <h5><a href="#setBufferSize">setBufferSize</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:setBufferSize(size[, version]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Sets the maximum size of the buffer that will be allocated for receive operations</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>size - An number containing the receive buffer size in bytes</li>
<li>version - An optional number containing the IP version for which to set the buffer size. Anything but 4 or 6 else sets the same size for both</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Notes</th>
                  <td><ul>
<li>The default maximum size is 9216 bytes</li>
<li>The theoretical maximum size of any IPv4 UDP packet is UINT16_MAX = 65535</li>
<li>The theoretical maximum size of any IPv6 UDP packet is UINT32_MAX = 4294967295</li>
<li>Since the OS notifies us of the size of each received UDP packet, the actual allocated buffer size for each packet is exact</li>
<li>In practice the size of UDP packets is generally much smaller than the max. Most protocols will send and receive packets of only a few bytes, or will set a limit on the size of packets to prevent fragmentation in the IP layer.</li>
<li>If you set the buffer size too small, the sockets API in the OS will silently discard any extra data</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L550">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="setCallback">
            <a name="//apple_ref/cpp/Method/setCallback" class="dashAnchor"></a>
            <h5><a href="#setCallback">setCallback</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:setCallback([fn]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Sets the read callback for the [`hs.socket.udp`](#new) instance. Must be set to read data from the socket</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>fn - An optional callback function to process data read from the socket. <code>nil</code> or no argument clears the callback. The callback receives 2 parameters:<ul>
<li>data - The data read from the socket as a string</li>
<li>sockaddr - The sending address as a binary socket address structure. See <a href="#parseAddress"><code>parseAddress</code></a></li>
</ul>
</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L592">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="setTimeout">
            <a name="//apple_ref/cpp/Method/setTimeout" class="dashAnchor"></a>
            <h5><a href="#setTimeout">setTimeout</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:setTimeout(timeout) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Sets the timeout for the socket operations. If the timeout value is negative, the operations will not use a timeout, which is the default</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td><ul>
<li>timeout - A number containing the timeout duration, in seconds</li>
</ul>
</td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td><ul>
<li>The <a href="#new"><code>hs.socket.udp</code></a> object</li>
</ul>
</td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/libsocket_udp.m#L619">extensions/socket/libsocket_udp.m</a></td>
              </tr>
            </table>
          </section>
          <section id="write">
            <a name="//apple_ref/cpp/Method/write" class="dashAnchor"></a>
            <h5><a href="#write">write</a></h5>
            <table>
              <tr>
                <th>Signature</th>
                <td><code>hs.socket.udp:write(message[, tag]) -&gt; self</code></td>
              </tr>
              <tr>
                <th>Type</th>
                <td>Method</td>
              </tr>
              <tr>
                <th>Description</th>
                <td>Alias for [`hs.socket.udp:send`](#send)</td>
              </tr>
              <tr>
                  <th>Parameters</th>
                  <td></td>
              </tr>
              <tr>
                  <th>Returns</th>
                  <td></td>
              </tr>
              <tr>
                <th>Source</th>
                <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/socket/socket.lua#L243">extensions/socket/socket.lua</a></td>
              </tr>
            </table>
          </section>
  </body>
</html>